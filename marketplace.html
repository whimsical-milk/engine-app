<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Marketplace</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Game Marketplace</h1>
<p id="user-info">Loading...</p>

<button onclick="logout()">Log out</button>

<hr>

<p>No premade games. User-created only.</p>

<script type="module">
import { initializeApp } from
"https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";

import {
  getAuth,
  onAuthStateChanged,
  signOut
} from
"https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

import {
  getFirestore,
  doc,
  getDoc
} from
"https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

/* ðŸ”¥ SAME CONFIG AS app.js */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* AUTH CHECK */
onAuthStateChanged(auth, async (user) => {
  if (user) {
    // User is logged in â€” show their info
    const snap = await getDoc(doc(db, "users", user.uid));
    const data = snap.data();
    document.getElementById("user-info").innerText =
      `Logged in as ${data.username}`;
  } else {
    // User is NOT logged in â€” redirect
    location.href = "index.html";
  }
});

/* LOGOUT */
window.logout = async () => {
  await signOut(auth);
  location.href = "index.html";
};
</script>

</body>
</html>
